function fauxTerm(a){function b(){p.classList.add("fauxterm"),o=document.createElement("textarea"),o.className="fauxterm-input",document.body.appendChild(o),p.addEventListener("click",function(a){o.focus(),p.classList.add("fauxterm-focus")}),o.addEventListener("keydown",n),o.addEventListener("blur",function(a){p.classList.remove("fauxterm-focus")}),z&&(o.focus(),p.classList.add("fauxterm-focus")),d()}function c(){return s+"$ "}function d(){var a='<span class="fauxterm-bell"></span>',b=q+c()+r;p.innerHTML=b,p.innerHTML+=a,p.scrollTop=p.scrollHeight}function e(a){if(q+=a,q.length>v){var b=q.length-v;q=q.substr(b)}}function f(a){var b=0,c=t.length;for(b;b<c;b++){var d=new RegExp("{"+t[b]+"}","g"),e=new RegExp("{/"+t[b]+"}","g");a=a.replace(d,'<span class="'+t[b]+'">'),a=a.replace(e,"</span>")}return a}function g(a,b){return q="",""}function h(a){return!!A.hasOwnProperty(a)}function i(a,b){var c=a[0];return A[c](a,b)}function j(){var a,b=r,g=b.split(" "),j=g.length,l=g[0];r+="\n",e(c()+r),r="",""!==l&&(a=h(l)?i(g,j):u?u(g,j):"{white}{bold}"+l+"{/bold}{/white}: command not found\n",a===!1&&(a="{white}{bold}"+l+"{/bold}{/white}: command not found\n"),a=f(a),e(a),k(b)),d()}function k(a){if(w.unshift(a),x=-1,w.length>y){console.log("reducing command history size"),console.log(w.length);var b=w.length-y;w.splice(w.length-1,b),console.log(w.length)}}function l(a){var b=[32,190,192,189,187,220,221,219,222,186,188,191];return b.indexOf(a)>-1}function m(a){var b=(w.length-1,x+a);b<-1&&(b=-1),b>=w.length&&(b=w.length-1),b!==x&&(x=b),r=b>-1?w[b]:""}function n(a){a.preventDefault(),o.value="",a.keyCode>=48&&a.keyCode<=90||l(a.keyCode)?a.ctrlKey||(r+=a.key):13===a.keyCode?j():9===a.keyCode?r+="\t":38===a.keyCode?m(1):40===a.keyCode?m(-1):"Backspace"===a.key&&(r=r.substr(0,r.length-1)),d()}var o,p=a.el||document.getElementById("term"),q=a.initialMessage||"",r=a.initialLine||"",s=a.cwd||"~/",t=a.tags||["red","blue","white","bold"],u=a.cmd||!1,v=a.maxBufferLength||8192,w=[],x=-1,y=a.maxCommandHistory||100,z=a.autoFocus||!1,A={clear:g};b()}
